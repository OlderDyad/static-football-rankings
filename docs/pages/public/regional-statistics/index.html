<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regional Statistics - McKnight's American Football</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static-football-rankings/css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Header Banner -->
    <div class="header-banner">
        <img src="/static-football-rankings/images/football-field-top.jpg" alt="Football Field Header" class="w-100" />
    </div>

    <!-- Breadcrumb navigation -->
    <div class="container mt-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/static-football-rankings/">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Regional Statistics</li>
            </ol>
        </nav>
    </div>

    <div class="container mt-4">
        <h1 class="mb-4">Regional Statistics</h1>
        
        <p class="lead mb-4">
            Explore game coverage statistics by region. View trends over time and compare regional differences.
        </p>

        <!-- Regional Comparison Card -->
        <div class="row mb-4">
            <div class="col-md-12">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Regional Comparison</h5>
                        <p class="card-text text-muted">Compare game coverage across all regions over time.</p>
                        <a href="/static-football-rankings/pages/public/regional-statistics/comparison.html" 
                           class="btn btn-primary">View Regional Comparison</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Regional Cards - matching States Index color scheme -->
        <div class="row g-4">
            <!-- Northeast Region - Blue (Primary) -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-primary">Northeast Region</h5>
                        <p class="card-text text-muted mb-2">11 States</p>
                        <p class="card-text small">CT, DE, DC, ME, MA, NH, NJ, NY, PA, RI, VT</p>
                        <div id="northeast-stats" class="mb-3">
                            <small class="text-muted">Loading statistics...</small>
                        </div>
                        <div class="mt-auto">
                            <a href="/static-football-rankings/pages/public/regional-statistics/northeast.html" 
                               class="btn btn-primary">View Northeast Statistics</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Southern Region - Green (Success) -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-success">Southern Region</h5>
                        <p class="card-text text-muted mb-2">15 States</p>
                        <p class="card-text small">AL, AR, FL, GA, KY, LA, MD, MS, NC, OK, SC, TN, TX, VA, WV</p>
                        <div id="southeast-stats" class="mb-3">
                            <small class="text-muted">Loading statistics...</small>
                        </div>
                        <div class="mt-auto">
                            <a href="/static-football-rankings/pages/public/regional-statistics/southeast.html" 
                               class="btn btn-success">View Southern Statistics</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Midwest Region - Yellow (Warning) -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-warning">Midwest Region</h5>
                        <p class="card-text text-muted mb-2">12 States</p>
                        <p class="card-text small">IL, IN, IA, KS, MI, MN, MO, NE, ND, OH, SD, WI</p>
                        <div id="midwest-stats" class="mb-3">
                            <small class="text-muted">Loading statistics...</small>
                        </div>
                        <div class="mt-auto">
                            <a href="/static-football-rankings/pages/public/regional-statistics/midwest.html" 
                               class="btn btn-warning">View Midwest Statistics</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Western Region - Red (Danger) -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-danger">Western Region</h5>
                        <p class="card-text text-muted mb-2">13 States</p>
                        <p class="card-text small">AK, AZ, CA, CO, HI, ID, MT, NV, NM, OR, UT, WA, WY</p>
                        <div id="west-stats" class="mb-3">
                            <small class="text-muted">Loading statistics...</small>
                        </div>
                        <div class="mt-auto">
                            <a href="/static-football-rankings/pages/public/regional-statistics/west.html" 
                               class="btn btn-danger">View Western Statistics</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Canada Region - Cyan (Info) -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-info">Canadian Provinces</h5>
                        <p class="card-text text-muted mb-2">8 Provinces</p>
                        <p class="card-text small">AB, BC, MB, NB, NS, ON, QC, SK</p>
                        <div id="canada-stats" class="mb-3">
                            <small class="text-muted">Loading statistics...</small>
                        </div>
                        <div class="mt-auto">
                            <a href="/static-football-rankings/pages/public/regional-statistics/canada.html" 
                               class="btn btn-info">View Canada Statistics</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-5 mb-3">
            <div class="text-center">
                <p>&copy; 2025 McKnight's Football Rankings</p>
            </div>
        </footer>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Load regional summaries -->
    <script>
        // Load all regions summary
        fetch('/static-football-rankings/data/regional-statistics/all_regions_summary.json')
            .then(response => {
                if (!response.ok) throw new Error('Summary data not available');
                return response.json();
            })
            .then(data => {
                // Map JSON region names to element IDs
                // Note: JSON uses "Southeast" but we display as "Southern", 
                // and JSON uses "Southwest" which we've merged into other regions
                const regionMapping = {
                    'Northeast': 'northeast-stats',
                    'Southeast': 'southeast-stats',  // Maps to Southern display
                    'Midwest': 'midwest-stats',
                    'West': 'west-stats',
                    'Canada': 'canada-stats'
                };

                Object.keys(regionMapping).forEach(jsonKey => {
                    const elementId = regionMapping[jsonKey];
                    const regionData = data[jsonKey];
                    const element = document.getElementById(elementId);
                    
                    if (regionData && element) {
                        element.innerHTML = `
                            <small>
                                <strong>${regionData.total_games ? regionData.total_games.toLocaleString() : 'N/A'}</strong> games | 
                                <strong>${regionData.earliest_season || '?'}-${regionData.latest_season || '?'}</strong>
                            </small>
                        `;
                    } else if (element) {
                        element.innerHTML = '<small class="text-muted">Statistics available on detail page</small>';
                    }
                });

                // Handle Southwest data - add to Southern if present
                if (data['Southwest']) {
                    const southeastElement = document.getElementById('southeast-stats');
                    const seData = data['Southeast'];
                    const swData = data['Southwest'];
                    if (southeastElement && seData && swData) {
                        const combinedGames = (seData.total_games || 0) + (swData.total_games || 0);
                        const earliestSeason = Math.min(seData.earliest_season || 9999, swData.earliest_season || 9999);
                        const latestSeason = Math.max(seData.latest_season || 0, swData.latest_season || 0);
                        southeastElement.innerHTML = `
                            <small>
                                <strong>${combinedGames.toLocaleString()}</strong> games | 
                                <strong>${earliestSeason}-${latestSeason}</strong>
                            </small>
                        `;
                    }
                }
            })
            .catch(error => {
                console.log('Regional summary data not available:', error);
                document.querySelectorAll('[id$="-stats"]').forEach(el => {
                    el.innerHTML = '<small class="text-muted">View details for statistics</small>';
                });
            });
    </script>
</body>
</html>
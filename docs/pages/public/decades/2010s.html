<!DOCTYPE html>
<html lang="en">
    <head>
        <base href="/">
        <meta name="decade-info" content="start-year:2010,end-year:2019">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>2010s High School Football Teams - McKnight's American Football</title>
        <meta name="decade-info" content="start-year:2010,end-year:2019">
        <meta name="data-file" content="/data/decade-teams-2010s.json">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="/css/styles.css" rel="stylesheet">
    </head>
<body>
   <div class="header-banner">
       <img src="/static-football-rankings/images/football-field-top.jpg" alt="Football Field Header" class="w-100" />
   </div>

   <div class="container mt-3">
       <nav aria-label="breadcrumb">
           <ol class="breadcrumb">
               <li class="breadcrumb-item"><a href="/static-football-rankings/index.html">Home</a></li>
               <li class="breadcrumb-item"><a href="/static-football-rankings/pages/public/decades/index.html">Rankings by Decade</a></li>
               <li class="breadcrumb-item active">2010s</li>
           </ol>
       </nav>
   </div>

   <div class="container mt-4">
       <h1 data-page-name="2010s">Top High School Football Teams of the 2010s</h1>

       <div class="d-flex justify-content-end mb-3">
           <small class="text-muted">Updated: <span id="lastUpdated"></span></small>
       </div>

       <div class="table-responsive">
           <table class="table table-striped table-hover">
               <thead>
                   <tr>
                       <th>Rank</th>
                       <th>Team</th>
                       <th>State</th>
                       <th>Seasons</th>
                       <th>Combined</th>
                       <th>Margin</th>
                       <th>Win-Loss</th>
                       <th>Offense</th>
                       <th>Defense</th>
                       <th>Games</th>
                   </tr>
               </thead>
               <tbody id="programsTableBody">
                   <tr>
    <td>1</td>
    <td>Bellflower Saint John Bosco (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>83.934</td>
    <td>101.500</td>
    <td>3.000</td>
    <td>72.760</td>
    <td>-29.130</td>
    <td>9</td>
</tr><tr>
    <td>2</td>
    <td>Katy (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>80.793</td>
    <td>96.920</td>
    <td>2.520</td>
    <td>65.860</td>
    <td>-35.440</td>
    <td>12</td>
</tr><tr>
    <td>3</td>
    <td>Santa Ana Mater Dei (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>80.726</td>
    <td>92.300</td>
    <td>2.850</td>
    <td>69.510</td>
    <td>-28.330</td>
    <td>12</td>
</tr><tr>
    <td>4</td>
    <td>Allen (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>79.685</td>
    <td>98.390</td>
    <td>2.950</td>
    <td>70.870</td>
    <td>-26.140</td>
    <td>11</td>
</tr><tr>
    <td>5</td>
    <td>Bellflower Saint John Bosco (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>79.482</td>
    <td>95.300</td>
    <td>2.530</td>
    <td>69.520</td>
    <td>-27.420</td>
    <td>10</td>
</tr><tr>
    <td>6</td>
    <td>Santa Ana Mater Dei (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>77.839</td>
    <td>91.780</td>
    <td>2.410</td>
    <td>71.030</td>
    <td>-25.500</td>
    <td>9</td>
</tr><tr>
    <td>7</td>
    <td>DeSoto (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>76.951</td>
    <td>92.470</td>
    <td>2.690</td>
    <td>71.550</td>
    <td>-22.940</td>
    <td>9</td>
</tr><tr>
    <td>8</td>
    <td>Baltimore Saint Frances Academy (MD)</td>
    <td>(MD)</td>
    <td></td>
    <td>76.946</td>
    <td>93.450</td>
    <td>2.610</td>
    <td>63.440</td>
    <td>-29.510</td>
    <td>8</td>
</tr><tr>
    <td>9</td>
    <td>Katy (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>76.923</td>
    <td>94.660</td>
    <td>2.310</td>
    <td>67.310</td>
    <td>-27.240</td>
    <td>8</td>
</tr><tr>
    <td>10</td>
    <td>Miami Central (FL)</td>
    <td>(FL)</td>
    <td></td>
    <td>76.912</td>
    <td>91.840</td>
    <td>2.560</td>
    <td>66.510</td>
    <td>-27.460</td>
    <td>10</td>
</tr><tr>
    <td>11</td>
    <td>Southlake Carroll (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>75.944</td>
    <td>90.770</td>
    <td>2.420</td>
    <td>67.660</td>
    <td>-25.650</td>
    <td>8</td>
</tr><tr>
    <td>12</td>
    <td>Southlake Carroll (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>75.786</td>
    <td>93.180</td>
    <td>2.100</td>
    <td>66.140</td>
    <td>-28.420</td>
    <td>9</td>
</tr><tr>
    <td>13</td>
    <td>Wexford North Allegheny (PA)</td>
    <td>(PA)</td>
    <td></td>
    <td>75.741</td>
    <td>91.560</td>
    <td>2.310</td>
    <td>62.380</td>
    <td>-32.670</td>
    <td>11</td>
</tr><tr>
    <td>14</td>
    <td>Santa Ana Mater Dei (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>75.556</td>
    <td>85.010</td>
    <td>2.560</td>
    <td>61.980</td>
    <td>-29.790</td>
    <td>11</td>
</tr><tr>
    <td>15</td>
    <td>Norman Park Colquitt County (GA)</td>
    <td>(GA)</td>
    <td></td>
    <td>75.423</td>
    <td>92.330</td>
    <td>2.490</td>
    <td>62.570</td>
    <td>-30.470</td>
    <td>12</td>
</tr><tr>
    <td>16</td>
    <td>Allen (TX)</td>
    <td>(TX)</td>
    <td></td>
    <td>74.668</td>
    <td>87.960</td>
    <td>2.670</td>
    <td>67.110</td>
    <td>-25.400</td>
    <td>12</td>
</tr><tr>
    <td>17</td>
    <td>Folsom (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>74.360</td>
    <td>92.750</td>
    <td>2.520</td>
    <td>68.750</td>
    <td>-22.900</td>
    <td>11</td>
</tr><tr>
    <td>18</td>
    <td>Louisville Trinity (KY)</td>
    <td>(KY)</td>
    <td></td>
    <td>74.193</td>
    <td>91.970</td>
    <td>2.400</td>
    <td>64.910</td>
    <td>-26.810</td>
    <td>9</td>
</tr><tr>
    <td>19</td>
    <td>Honolulu Punahou (HI)</td>
    <td>(HI)</td>
    <td></td>
    <td>74.094</td>
    <td>88.860</td>
    <td>2.530</td>
    <td>58.000</td>
    <td>-29.050</td>
    <td>9</td>
</tr><tr>
    <td>20</td>
    <td>Bellflower Saint John Bosco (CA)</td>
    <td>(CA)</td>
    <td></td>
    <td>73.765</td>
    <td>89.120</td>
    <td>2.420</td>
    <td>65.450</td>
    <td>-25.780</td>
    <td>11</td>
</tr>
               </tbody>
           </table>
       </div>

       <nav aria-label="Page navigation" class="mt-4">
           <ul class="pagination justify-content-center" id="pagination"></ul>
       </nav>

       <div class="comments-section mt-5">
           <h3>Comments</h3>
           <div id="authContainer" class="mb-3"></div>
           <div id="commentForm" class="mb-4" style="display: none">
               <div class="card">
                   <div class="card-body">
                       <textarea id="commentText" class="form-control mb-2" rows="3" placeholder="Share your thoughts..."></textarea>
                       <div class="d-flex justify-content-between align-items-center">
                           <button id="submitComment" class="btn btn-primary">Post Comment</button>
                           <small class="text-muted">Posting as <span id="authorName">Anonymous</span></small>
                       </div>
                   </div>
               </div>
           </div>
           <div id="commentsList"></div>
       </div>

       <footer class="mt-5 mb-3">
           <div class="text-center">
               <p>© 2025 McKnight's Football Rankings</p>
           </div>
       </footer>
   </div>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
   <script type="module" src="/static-football-rankings/docs/js/main.js"></script>

   <script>
const VERCEL_API_BASE = "https://static-football-rankings.vercel.app/api";

/**********************************************************
 * AUTH / LOGIN LOGIC
 **********************************************************/
async function checkLoginStatus() {
  try {
    const res = await fetch(`${VERCEL_API_BASE}/auth/status`, {
      method: 'GET',
      credentials: 'include'
    });
    const data = await res.json();

    if (data.success && data.loggedIn) {
      // Logged in
      document.getElementById('commentForm').style.display = 'block';
      document.getElementById('authorName').textContent = data.user.name || 'Anonymous';
      renderAuthUI(true, data.user);
    } else {
      // Not logged in
      document.getElementById('commentForm').style.display = 'none';
      document.getElementById('authorName').textContent = 'Anonymous';
      renderAuthUI(false);
    }
  } catch (error) {
    console.error('Login status error:', error);
    // default to logged-out state
    document.getElementById('commentForm').style.display = 'none';
    document.getElementById('authorName').textContent = 'Anonymous';
    renderAuthUI(false);
  }
}

function renderAuthUI(loggedIn, user = null) {
  const authContainer = document.getElementById('authContainer');
  if (!authContainer) return;

  if (loggedIn && user) {
    authContainer.innerHTML = `
      <p>Welcome, <strong>${user.name}</strong> (${user.email}). 
         <button id="logoutBtn" class="btn btn-outline-secondary btn-sm">Logout</button></p>
    `;
    document.getElementById('logoutBtn').addEventListener('click', doLogout);
  } else {
    authContainer.innerHTML = `
      <button id="loginBtn" class="btn btn-success">Sign in with Google</button>
    `;
    document.getElementById('loginBtn').addEventListener('click', doLogin);
  }
}

function doLogin() {
  window.location.href = `${VERCEL_API_BASE}/auth/google`;
}

function doLogout() {
  document.cookie = "auth_token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Secure; SameSite=None;";
  document.cookie = "user_name=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Secure; SameSite=None;";
  document.cookie = "user_email=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Secure; SameSite=None;";
  window.location.reload();
}

/**********************************************************
 * COMMENTS LOGIC
 **********************************************************/
async function fetchComments() {
  const pageId = getPageId();
  try {
    const res = await fetch(`${VERCEL_API_BASE}/comments?pageId=${encodeURIComponent(pageId)}`, {
      method: 'GET',
      credentials: 'include'
    });
    const data = await res.json();
    if (data.success) {
      displayComments(data.comments);
    }
  } catch (err) {
    console.error('Error fetching comments:', err);
  }
}

function displayComments(comments) {
  const list = document.getElementById('commentsList');
  if (!list) return;
  if (!Array.isArray(comments) || comments.length === 0) {
    list.innerHTML = '<p class="text-muted">No comments yet</p>';
    return;
  }
  list.innerHTML = comments.map(c => `
    <div class="card mb-2">
      <div class="card-body">
        <p class="mb-1">${escapeHTML(c.text)}</p>
        <small class="text-muted">
          by ${escapeHTML(c.author)} on ${new Date(c.timestamp).toLocaleString()}
        </small>
      </div>
    </div>
  `).join('');
}

async function submitComment() {
  const textEl = document.getElementById('commentText');
  const text = textEl.value.trim();
  if (!text) return alert('Please enter a comment');

  const pageId = getPageId();

  try {
    const res = await fetch(`${VERCEL_API_BASE}/comments`, {
      method: 'POST',
      credentials: 'include',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text, pageId })
    });
    const data = await res.json();
    if (data.success) {
      textEl.value = '';
      fetchComments();
    } else {
      alert('Error posting comment: ' + (data.error || 'Unknown'));
    }
  } catch (err) {
    console.error('Error posting comment:', err);
    alert('Failed to post comment');
  }
}

function escapeHTML(str) {
  return str
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}

function getPageId() {
  const el = document.querySelector('[data-page-name]');
  return el ? el.getAttribute('data-page-name') : 'unknown';
}

/**********************************************************
 * INIT
 **********************************************************/
document.getElementById('submitComment')?.addEventListener('click', submitComment);

(function initPage() {
  checkLoginStatus(); 
  fetchComments();
})();
</script>

</body>
</html>

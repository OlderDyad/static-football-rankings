Google AI Newspaper OCR Workflow

Summery Steps:

CD C:\Users\demck\OneDrive\Football_2024\static-football-rankings\python_scripts\data_import\

**python custom_extractor_prepper.py**

**python master_scores_importer.py**

Complete Alias list in new .csv file

CD C:\Users\demck\OneDrive\Football_2024\static-football-rankings\python_scripts\data_import\

**python apply_corrections.py**

Repeat above two steps until no unrecognized aliases

SQL batch import instructioins will be generated upon this successful run of the python apply_corrections.py script.

===========================================================================================================================================
This document outlines the step-by-step process for extracting high school football scores from digital newspaper images, processing them with Google's AI tools, and successfully importing them into the hs_football_database.
===========================================================================================================================================

Phase 1: Preparation & Image Sourcing
The goal of this phase is to acquire the raw images and prepare them for processing.

Acquire Source Images: Obtain your newspaper page images (e.g., JPEGs or PDFs) from your sources (like newspapers.com, Google News Archive, etc.).

Organize Files: Place all raw images for a batch into a "Source" folder (e.g., J:/.../Newspapers/Source_Images).

Standardize Filenames (Crucial): Before processing, name your image files using the standard format your Python script expects. This is how the date and source are determined.

Format: [Newspaper_Region]_[YYYY]_[MM]_[DD].jpg

Example: The_Sun_1997_09_06.jpg

Phase 2: Extraction (Google AI)
This phase uses Google's AI (Document AI or a custom Gemini model) to read the images and extract the scores into a structured format.

Access Google Cloud Console: Log in to your Google Cloud project.

Open Your Processor: Navigate to your trained Document AI processor.

Upload & Process: Upload your batch of standardized images from the "Source" folder and run the processor.

Export Results: The AI will return structured data (likely in JSON format).

Convert to CSV: Convert this AI output into the simple, 7-column CSV format required by your Python importer. The columns should be:

HomeTeamRaw

HomeScore

VisitorTeamRaw

VisitorScore

Overtime

quality_status

processing_notes

Phase 3: Staging (Review & Scripted Import)
This is the most critical quality-check phase. Do not skip the manual review.

Manual CSV Review: Open the CSV file from Phase 2 in Excel or Google Sheets. Manually scan the scores for obvious OCR errors that are easier to fix now than in the database.

Look for: Impossible scores (3914), combined scores in one column, or text in score fields.

Fix: Correct the typos directly in the CSV file.

Standardize CSV Filename: Save your final, clean CSV with the exact same standardized name as the original image, just with a .csv extension.

Example: The_Sun_1997_09_06.csv

Move to Staging: Move the final, reviewed CSV file(s) into your Python script's target directory:

J:/Users/demck/Google Drive/Documents/Football/HSF/Newspapers/Staged

Run Python Alias Check: Open your terminal (like Command Prompt or PowerShell) and navigate to your scripts folder. Then, run the importer to find unrecognized teams.

Bash

CD C:\Users\demck\OneDrive\Football_2024\static-football-rankings\python_scripts\data_import\

**python master_scores_importer.py**

Resolve Aliases (Repeat as needed):

The script will stop and create New_Alias_Suggestions.csv in the Staged folder.

Open this CSV and fill in the correct, standardized team names in the Final_Proper_Name column.

Save the CSV and run the correction script:

Bash

python apply_corrections.py
Re-run python master_scores_importer.py to see if any aliases remain. Repeat this step until no unrecognized aliases are found.

Get SQL Command: Once successful, the script will complete the "Stage 1 Ingestion," provide a new BatchID, and print the final SQL command you need for the next phase. Copy this BatchID and the SQL command.

Phase 4: Finalization (SQL)
This phase moves the data from the temporary staging table into the permanent HS_Scores table.

Open SSMS: Connect to your MCKNIGHTS-PC\SQLEXPRESS01 server and the hs_football_database.

Execute Stored Procedure: Open a new query window. Paste and run the SQL command generated by the Python script:

SQL

EXEC dbo.sp_StandardizeStagedScores_v2 @BatchID = '...your_new_batch_id...';
Verify Execution: The script should run successfully and print a completion message. Your data is now in the HS_Scores table.

Phase 5: Post-Import Quality Control
This is the final verification step to ensure the new data hasn't created statistical anomalies.

Check for Corrupted Margins: Run your margin-check query to ensure no new calculation errors were introduced.

SQL

SELECT * FROM dbo.HS_Scores WHERE Margin <> (Home_Score - Visitor_Score);
If this returns results, run your UPDATE script to fix them.

Run Outlier Analysis: Re-run your outlier detection procedures for the seasons you just imported.

EXEC dbo.FindRatingOutliers_MovingAvg ...

EXEC dbo.FindSuspiciousGameCounts ...

Investigate & Annotate: If any new outliers or high game counts appear, use our established data-cleaning workflow to investigate, correct, and (if necessary) annotate them using the DataQualityNotes table.